# DB
Задание 3. Однотабличные запросы
Задание для самостоятельной работы: Сформулируйте на языке SQL
запросы на выборку следующих данных:
1. Список всех заказов за определенный период времени (например, май
2019 года) отсортированный по дате заказа;
2. Список всех товаров, названия которых включают слово ‘монитор’ с
указанием их остатка на складе.

Задание для самостоятельной работы: Сформулируйте на языке SQL
запросы на выборку следующих данных:
1. Суммарная стоимость всех заказов;
2. Количество различных городов, содержащихся в таблице Customer.
   
Задание для самостоятельной работы: Сформулируйте на языке SQL
запросы на выборку следующих данных:
1. Список всех заказов с указанием их суммарной стоимости;
2. Список клиентов, которые за заданный период (например, май 2019
года) совершили более 3 заказов.

Задание 4. Сложные запросы
Задание для самостоятельной работы: По аналогии с предыдущим
примером сформулируйте запрос, возвращающий все заказы, в которых
содержится заданный товар (по названию товара).
Задание для самостоятельной работы: Сформулируйте запрос,
возвращающий список всех клиентов (с указанием фамилии и имени),
совершивших заказ за определенный период времени.
Задание для самостоятельной работы: Cформулируйте запрос,
возвращающий список всех заказов с суммарной стоимость более заданной
величины.

Задание для самостоятельной работы: Сформулируйте запрос,
возвращающий список товаров в заданном заказе (по заданному IdOrd). Результат
должен включать следующие поля: название товара, цена, количество, стоимость.

Задание для самостоятельной работы: Сформулируйте на языке SQL
запросы на выборку следующих данных (с использование оператора JOIN для
соединения таблиц):
1. список всех товаров, которые когда-либо заказывал заданный клиент;
2. список всех клиентов, не имеющих ни одного заказа.
   
Задание 5. Удаление и добавление записей
Задание для самостоятельной работы: Сформулируйте на языке SQL
запрос на удаление всех заказов, не имеющих в составе ни одного товара (т.е. все
пустые заказы).

Задание для самостоятельной работы: Сформулируйте на языке SQL
запрос имитирующий поступление на склад новой партий определенного товара
(Обновление столбца InStock в таблице Product).

Задание 6. Представление
Задание для самостоятельной работы: Создайте представление
возвращающее список заказов с указанием имени клиента и количества товаров в
каждом заказе. Таким образом, результат должен включать следующие атрибуты:
IdOrd, OrdDate, IdCust, FName, LName, Количество видов товаров в заказе.

Задание 8. Хранимые процедуры
Задание для самостоятельной работы: Создайте хранимые процедуры,
реализующие следующие действия:
 Возврат списка всех заказов содержащих заданный товар (по IdProd).
 Определение количества клиентов, не имеющих ни одного заказа.
Результат должен возвращаться через выходной параметр.
 Удаление из базы данных информации об определенном клиенте (по
IdCust). Если с данных клиентом имеются связанные записи (заказы) удаление
должно быть отменено. Возвращаемое значение должно определять успешность
выполнения операции.

Задание 9. Функции
Задание для самостоятельной работы: Создайте скалярные
пользовательские функции, возвращающие:
  Количество товара на складе по заданному уникальному
идентификатору товара;
  Суммарную стоимость товаров в заданном заказе.
Задание для самостоятельной работы: Создайте пользовательские
функции, возвращающие:
  Список всех товаров, которые не были ни разу заказаны
  Список всех заказов за заданный период времени.

Задание 10. Триггеры
Задание для самостоятельной работы: Создайте триггер, запрещающий
добавлять в заказ товары, отсутствующие на складе.

Задание 11. Система безопасности SQL Server
Задание для самостоятельной работы:
  Создайте логин SQL Server «Admin» и назначьте ей роль sysadmin;
  Создайте в базе данных роль «Saler» и назначьте ей разрешения на
выборку данных из всех таблиц, изменение данных в таблицах Order, OrdItem и
запуск хранимой процедуры spr_getOrders;
  Создайте логин SQL Server «Ivanov» и сопоставьте его с одноименным
пользователем в базе данных Sales. Назначьте созданному пользователю роль Saler.
